<!-- -*- pike -*-  -->
<pike>
string parse( RequestID id )
{
  if(! id->misc->config_user->auth( "Edit Users" ) )
    return "No such luck (permission denied)";
  foreach( sort( id->misc->list_config_users() ), string u )
  {
    object u  = id->misc->get_config_user( u );
    u->form( id );
  }
  return "";
}
</pike>

<topmenu  selected=home>

<!-- */ -->

<content>
<p><br>
<table align=right width=90% border=0 cellpadding=0 cellspacing=0>
<tr><td width=100%><table width=100% border=0 callpadding=0 cellspacing=0><tr width=100%><td valign=bottom
><tablist preparse
         dimcolor="#999999"
         txtcolor="white"
         selcolor="#eeeeee"
         #selected#
         fgcolor="#999999"
         bgcolor=white>
    <tab href="../"><cf-locale get=welcome></tab>
  <cf-perm perm="View Settings">
    <tab href="debug_info.html"><cf-locale get=debug_info></tab>
  </cf-perm>
    <tab href="settings.html"><cf-locale get=settings></tab>
  <cf-perm perm="Edit Users">
    <tab href="users.html" selected><cf-locale get=users></tab>
  </cf-perm>
  <cf-perm perm="Restart">
    <tab href="restart.html"><cf-locale get=restart></tab>
  </cf-perm>
  <cf-perm perm="Shutdown">
    <tab href="shutdown.html"><cf-locale get=shutdown></tab>
  </cf-perm>
</tablist></td><td width=100% valign=bottom><img src=/internal-roxen-black-dot width=100% height=1></td></tr></table></td></tr>
<tr><td bgcolor="#eeeeee">
<awizard>

<page name=top>
  <button title=" Edit Users " page=edit_users>
  <button title=" Create new user " page=create_user>
</page>
 
<page name=create_user>
<pre>
User ID:  <input name=user_name>
<dbutton page=top title=" Create User ">
<pike>
  if( !strlen(id->variables->user_name) ) 
    return "<error>Too short user name</error>";
  id->misc->create_new_config_user(   id->variables->user_name );
</pike>
</dbutton>
</page>

<page name=edit_users>
<button title=" Back " page=top>
<pike>
string parse( RequestID id )
{
  string res="";
  if(! id->misc->config_user->auth( "Edit Users" ) )
    return "No such luck (permission denied)";

  foreach( sort( id->misc->list_config_users() ), string uid )
  {
    object u  = id->misc->get_config_user( uid );
    res += "<table width=100%><tr><td bgcolor=white><font size=+2>"+uid
            +"</font></td></tr></table>";
    res += u->form( id );
  }
  return res;
}
</pike>
</page>
</awizard>
</td></table>
</content>
